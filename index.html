<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bing每日壁纸</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ================= 可定制参数 START ================= */
        /* 颜色主题 */
        :root {
            --bg-color: #0c0c14;          /* 背景颜色 */
            --card-bg: #1a1a2e;           /* 卡片背景 */
            --text-color: rgba(255, 255, 255, 0.9); /* 文字颜色 */
            --accent-color: #5d8bf4;      /* 强调色 */
        }
        
        /* 布局参数 */
        :root {
            --mobile-columns: 1;          /* 手机列数 */
            --tablet-columns: 2;          /* 平板列数 */
            --desktop-columns: 3;         /* 桌面列数 */
            
            --mobile-gap: 8px;           /* 手机间距 */
            --tablet-gap: 12px;          /* 平板间距 */
            --desktop-gap: 15px;         /* 桌面间距 */
            
            --mobile-padding: 10px;       /* 手机内边距 */
            --desktop-padding: 15px;      /* 桌面内边距 */
            
            --max-width: 1200px;         /* 最大宽度 */
            
            --image-ratio: 1.5;          /* 图片宽高比(宽度/高度) */
            --image-max-height: 400px;    /* 图片最大高度 */
        }
        
        /* 动画参数 */
        :root {
            --hover-scale: 1.03;         /* 悬停放大比例 */
            --transition-speed: 0.3s;     /* 动画速度 */
        }
        /* ================= 可定制参数 END ================= */
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: var(--bg-color);
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            overflow-x: hidden;
            color: var(--text-color);
            -webkit-tap-highlight-color: transparent;
            padding-bottom: 40px;
        }
        
        .header {
            text-align: center;
            padding: 20px 15px 15px;
            background: linear-gradient(to bottom, var(--bg-color), var(--bg-color)00);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header h1 {
            font-size: 24px;
            font-weight: 600;
            background: linear-gradient(45deg, var(--accent-color), #37bcf7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 5px;
        }
        
        .wallpaper-container {
            display: grid;
            grid-template-columns: repeat(var(--mobile-columns), 1fr);
            gap: var(--mobile-gap);
            padding: var(--mobile-padding);
            max-width: var(--max-width);
            margin: 0 auto;
        }
        
        .wallpaper-card {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            background: linear-gradient(135deg, var(--card-bg), #16213e);
            cursor: pointer;
            animation: fadeIn 0.6s ease-out;
            width: 100%;
            aspect-ratio: var(--image-ratio);
            max-height: var(--image-max-height);
            transition: all var(--transition-speed) ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .wallpaper-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            transition: transform var(--transition-speed) ease;
        }
        
        .wallpaper-card:hover {
            transform: scale(var(--hover-scale));
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
            z-index: 10;
        }
        
        .wallpaper-card:hover .wallpaper-image {
            transform: scale(1.05);
        }
        
        .wallpaper-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            padding: 12px 15px;
            opacity: 0;
            transition: opacity var(--transition-speed) ease;
            pointer-events: none;
        }
        
        .wallpaper-card:hover .wallpaper-overlay {
            opacity: 1;
        }
        
        .wallpaper-title {
            font-size: 14px;
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .wallpaper-date {
            font-size: 12px;
            opacity: 0.7;
        }
        
        .loading {
            text-align: center;
            padding: 40px 0;
            font-size: 16px;
            color: var(--accent-color);
            grid-column: 1 / -1;
        }
        
        .loading i {
            animation: spin 1.2s linear infinite;
            margin-right: 8px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .load-more-btn {
            display: block;
            width: 90%;
            max-width: 300px;
            margin: 20px auto;
            padding: 14px 0;
            background: linear-gradient(45deg, var(--accent-color), #37bcf7);
            border: none;
            border-radius: 50px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            text-align: center;
            cursor: pointer;
            transition: all var(--transition-speed) ease;
            box-shadow: 0 5px 15px rgba(93, 139, 244, 0.3);
        }
        
        .load-more-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(93, 139, 244, 0.4);
        }
        
        .load-more-btn:active {
            transform: translateY(0);
        }
        
        /* 响应式设计 - 平板 */
        @media (min-width: 600px) {
            .wallpaper-container {
                grid-template-columns: repeat(var(--tablet-columns), 1fr);
                gap: var(--tablet-gap);
            }
        }
        
        /* 响应式设计 - 桌面 */
        @media (min-width: 900px) {
            .wallpaper-container {
                grid-template-columns: repeat(var(--desktop-columns), 1fr);
                gap: var(--desktop-gap);
                padding: var(--desktop-padding);
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Bing每日壁纸</h1>
        <p>每日更新 · 高清4K · 点击图片查看详情</p>
    </div>
    
    <div class="wallpaper-container" id="wallpaperContainer">
        <!-- 壁纸卡片将通过JavaScript动态生成 -->
    </div>
    
    <button class="load-more-btn" id="loadMoreBtn">
        <i class="fas fa-plus"></i> 加载更多壁纸
    </button>
    
    <div class="loading" id="loadingIndicator" style="display: none;">
        <i class="fas fa-spinner"></i> 正在加载精美壁纸...
    </div>

    <script>
        /* ================= 可定制参数 START ================= */
        // API配置
        const API_CONFIG = {
            baseUrl: "https://www.bing.com",  // Bing基础URL
            apiPath: "/HPImageArchive.aspx", // API路径
            params: {                        // API参数
                format: "js",               // 返回格式
                idx: 0,                    // 开始索引
                n: 8,                      // 获取数量
                mkt: "zh-CN"               // 地区
            },
            imageBaseUrl: "https://cn.bing.com" // 图片基础URL
        };
        
        // 图片配置
        const IMAGE_CONFIG = {
            thumbnailQuality: 800,          // 缩略图质量(宽度)
            fullQuality: "UHD",             // 原图质量
            defaultImage: "https://www.bing.com/th?id=OHR.WolfeCrater_EN-US2390330059_UHD.jpg" // 默认图片
        };
        
        // 布局配置
        const LAYOUT_CONFIG = {
            initialLoadCount: 8,            // 初始加载数量
            loadMoreCount: 8,               // 每次加载更多数量
            maxHistoryDays: 7               // 最大历史天数
        };
        /* ================= 可定制参数 END ================= */
        
        // 获取DOM元素
        const wallpaperContainer = document.getElementById('wallpaperContainer');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const loadMoreBtn = document.getElementById('loadMoreBtn');
        
        // 壁纸数据
        let wallpapers = [];
        let currentIndex = 0;
        
        // 初始化页面
        document.addEventListener('DOMContentLoaded', () => {
            // 模拟数据加载 - 实际应用中替换为fetchBingWallpapers()
            loadMockData();
            
            // 加载更多按钮事件
            loadMoreBtn.addEventListener('click', loadMoreWallpapers);
        });
        
        // 从Bing API获取壁纸数据
        async function fetchBingWallpapers() {
            try {
                const url = `${API_CONFIG.baseUrl}${API_CONFIG.apiPath}?${new URLSearchParams(API_CONFIG.params)}`;
                const response = await fetch(url);
                const data = await response.json();
                
                return data.images.map(image => ({
                    id: image.hsh,
                    title: image.title,
                    date: new Date(image.enddate).toISOString().split('T')[0],
                    image: `${API_CONFIG.imageBaseUrl}${image.url}_${IMAGE_CONFIG.thumbnailQuality}x${Math.round(IMAGE_CONFIG.thumbnailQuality/image.ratio)}`,
                    originalUrl: `${API_CONFIG.imageBaseUrl}${image.url.replace("1920x1080", IMAGE_CONFIG.fullQuality)}`
                }));
            } catch (error) {
                console.error("Error fetching wallpapers:", error);
                return [];
            }
        }
        
        // 渲染壁纸卡片
        function renderWallpapers(wallpapersToRender) {
            wallpapersToRender.forEach(wallpaper => {
                const card = document.createElement('div');
                card.className = 'wallpaper-card';
                card.innerHTML = `
                    <img src="${wallpaper.image || IMAGE_CONFIG.defaultImage}" 
                         alt="${wallpaper.title}" 
                         class="wallpaper-image"
                         loading="lazy">
                    <div class="wallpaper-overlay">
                        <div class="wallpaper-title">${wallpaper.title}</div>
                        <div class="wallpaper-date">${wallpaper.date}</div>
                    </div>
                `;
                
                // 点击事件 - 打开原图
                card.addEventListener('click', () => {
                    window.open(wallpaper.originalUrl, '_blank');
                });
                
                wallpaperContainer.appendChild(card);
            });
            
            loadingIndicator.style.display = 'none';
            loadMoreBtn.style.display = 'block';
        }
        
        // 加载更多壁纸
        function loadMoreWallpapers() {
            loadingIndicator.style.display = 'block';
            loadMoreBtn.style.display = 'none';
            
            setTimeout(() => {
                // 模拟加载更多数据 - 实际应用中替换为fetchBingWallpapers()
                const newWallpapers = generateMockData(
                    LAYOUT_CONFIG.loadMoreCount, 
                    currentIndex + 1
                );
                
                wallpapers = [...wallpapers, ...newWallpapers];
                currentIndex += newWallpapers.length;
                
                renderWallpapers(newWallpapers);
            }, 800);
        }
        
        /* ================= 模拟数据函数 - 仅用于演示 ================= */
        function loadMockData() {
            loadingIndicator.style.display = 'block';
            
            setTimeout(() => {
                wallpapers = generateMockData(
                    LAYOUT_CONFIG.initialLoadCount,
                    0
                );
                currentIndex = wallpapers.length;
                
                renderWallpapers(wallpapers);
            }, 1000);
        }
        
        function generateMockData(count, startId) {
            const mockTitles = [
                "挪威峡湾的壮丽景色", "日本樱花盛开季节", "撒哈拉沙漠星空", 
                "威尼斯水城风光", "冰岛极光奇观", "中国长城日出", 
                "亚马逊热带雨林", "瑞士阿尔卑斯山脉", "富士山日出",
                "马尔代夫碧海蓝天", "巴黎埃菲尔铁塔", "新西兰草原牧场"
            ];
            
            return Array.from({ length: count }, (_, i) => ({
                id: startId + i,
                title: mockTitles[(startId + i) % mockTitles.length],
                date: new Date(Date.now() - (i * 24 * 60 * 60 * 1000)).toISOString().split('T')[0],
                image: `https://picsum.photos/${IMAGE_CONFIG.thumbnailQuality}/${Math.round(IMAGE_CONFIG.thumbnailQuality/1.5)}?random=${startId + i}`,
                originalUrl: IMAGE_CONFIG.defaultImage
            }));
        }
        /* ================= 模拟数据函数结束 ================= */
    </script>
</body>
</html>